{
  "swagger": "2.0",
  "info": {
    "title": "TrueAuth",
    "version": "0.1.0",
    "contact": {
      "name": "SirJager",
      "url": "https://github.com/sirjager/trueauth"
    }
  },
  "schemes": [
    "http",
    "https",
    "wss"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/": {
      "get": {
        "summary": "welcome message",
        "operationId": "TrueAuth_Welcome",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/trueauthWelcomeResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "tags": [
          "System"
        ]
      }
    },
    "/v1/auth/refresh": {
      "get": {
        "summary": "refresh access token",
        "operationId": "TrueAuth_Refresh",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/trueauthRefreshResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "user",
            "in": "query",
            "required": false,
            "type": "boolean"
          },
          {
            "name": "tokens",
            "in": "query",
            "required": false,
            "type": "boolean"
          },
          {
            "name": "cookies",
            "in": "query",
            "required": false,
            "type": "boolean"
          }
        ],
        "tags": [
          "Authentication"
        ],
        "security": [
          {
            "RefreshToken": []
          }
        ]
      }
    },
    "/v1/auth/reset": {
      "post": {
        "summary": "password reset",
        "operationId": "TrueAuth_Reset",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/trueauthResetResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/trueauthResetRequest"
            }
          }
        ],
        "tags": [
          "Authentication"
        ]
      }
    },
    "/v1/auth/signin": {
      "get": {
        "summary": "signin user",
        "operationId": "TrueAuth_Signin",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/trueauthSigninResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "user",
            "in": "query",
            "required": false,
            "type": "boolean"
          },
          {
            "name": "tokens",
            "in": "query",
            "required": false,
            "type": "boolean"
          },
          {
            "name": "cookies",
            "in": "query",
            "required": false,
            "type": "boolean"
          }
        ],
        "tags": [
          "Authentication"
        ],
        "security": [
          {
            "BasicAuth": []
          }
        ]
      }
    },
    "/v1/auth/signout": {
      "delete": {
        "summary": "signout sessions",
        "operationId": "TrueAuth_Signout",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/trueauthSignoutResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "session",
            "description": "session are optional if you want to target",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "all",
            "in": "query",
            "required": false,
            "type": "boolean"
          }
        ],
        "tags": [
          "Authentication"
        ],
        "security": [
          {
            "AccessToken": []
          }
        ]
      }
    },
    "/v1/auth/signup": {
      "post": {
        "summary": "signup new user",
        "operationId": "TrueAuth_Signup",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/trueauthSignupResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/trueauthSignupRequest"
            }
          }
        ],
        "tags": [
          "Authentication"
        ]
      }
    },
    "/v1/auth/user": {
      "get": {
        "summary": "get user",
        "operationId": "TrueAuth_User",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/trueauthUserResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "tags": [
          "Authentication"
        ],
        "security": [
          {
            "AccessToken": []
          }
        ]
      },
      "delete": {
        "summary": "user deletion",
        "operationId": "TrueAuth_Delete",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/trueauthDeleteResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "code",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "Authentication"
        ],
        "security": [
          {
            "AccessToken": []
          }
        ]
      }
    },
    "/v1/auth/validate": {
      "post": {
        "summary": "validates token",
        "operationId": "TrueAuth_Validate",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/trueauthValidateResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/trueauthValidateRequest"
            }
          }
        ],
        "tags": [
          "Authentication"
        ]
      }
    },
    "/v1/auth/verify": {
      "get": {
        "summary": "email verification",
        "operationId": "TrueAuth_Verify",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/trueauthVerifyResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "email",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "code",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "Authentication"
        ]
      }
    },
    "/v1/health": {
      "get": {
        "summary": "api health",
        "operationId": "TrueAuth_Health",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/trueauthHealthResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "tags": [
          "System"
        ]
      }
    }
  },
  "definitions": {
    "protobufAny": {
      "type": "object",
      "properties": {
        "@type": {
          "type": "string"
        }
      },
      "additionalProperties": {}
    },
    "rpcStatus": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    },
    "trueauthDeleteResponse": {
      "type": "object",
      "properties": {
        "message": {
          "type": "string"
        }
      }
    },
    "trueauthHealthResponse": {
      "type": "object",
      "properties": {
        "status": {
          "type": "string",
          "description": "Status represents the current status of the API."
        },
        "uptime": {
          "type": "string",
          "description": "Uptime represents the duration since the API was started."
        },
        "started": {
          "type": "string",
          "format": "date-time",
          "description": "Started represents the timestamp when the API was started."
        },
        "timestamp": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp represents the current timestamp."
        }
      }
    },
    "trueauthRefreshResponse": {
      "type": "object",
      "properties": {
        "sessionId": {
          "type": "string"
        },
        "accessToken": {
          "type": "string"
        },
        "accessTokenExpiresAt": {
          "type": "string",
          "format": "date-time"
        },
        "user": {
          "$ref": "#/definitions/trueauthUser"
        },
        "message": {
          "type": "string"
        }
      }
    },
    "trueauthResetRequest": {
      "type": "object",
      "properties": {
        "code": {
          "type": "string",
          "title": "if already has password reset code"
        },
        "email": {
          "type": "string",
          "title": "required: registered email address to reset"
        },
        "signoutAll": {
          "type": "boolean",
          "title": "optional: true to signout all sessions"
        },
        "newPassword": {
          "type": "string",
          "title": "send with code to change new password"
        }
      }
    },
    "trueauthResetResponse": {
      "type": "object",
      "properties": {
        "message": {
          "type": "string"
        }
      }
    },
    "trueauthSigninResponse": {
      "type": "object",
      "properties": {
        "user": {
          "$ref": "#/definitions/trueauthUser"
        },
        "sessionId": {
          "type": "string"
        },
        "accessToken": {
          "type": "string"
        },
        "refreshToken": {
          "type": "string"
        },
        "accessTokenExpiresAt": {
          "type": "string",
          "format": "date-time"
        },
        "refreshTokenExpiresAt": {
          "type": "string",
          "format": "date-time"
        },
        "message": {
          "type": "string"
        }
      }
    },
    "trueauthSignoutResponse": {
      "type": "object",
      "properties": {
        "message": {
          "type": "string"
        }
      }
    },
    "trueauthSignupRequest": {
      "type": "object",
      "properties": {
        "email": {
          "type": "string"
        },
        "username": {
          "type": "string"
        },
        "password": {
          "type": "string"
        },
        "firstname": {
          "type": "string"
        },
        "lastname": {
          "type": "string"
        }
      },
      "required": [
        "email",
        "username",
        "password"
      ]
    },
    "trueauthSignupResponse": {
      "type": "object",
      "properties": {
        "user": {
          "$ref": "#/definitions/trueauthUser"
        }
      }
    },
    "trueauthUser": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "format": "byte"
        },
        "email": {
          "type": "string"
        },
        "username": {
          "type": "string"
        },
        "firstname": {
          "type": "string"
        },
        "lastname": {
          "type": "string"
        },
        "verified": {
          "type": "boolean"
        },
        "blocked": {
          "type": "boolean"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "trueauthUserResponse": {
      "type": "object",
      "properties": {
        "user": {
          "$ref": "#/definitions/trueauthUser"
        }
      }
    },
    "trueauthValidateRequest": {
      "type": "object",
      "properties": {
        "token": {
          "type": "string"
        },
        "user": {
          "type": "boolean"
        }
      },
      "required": [
        "token"
      ]
    },
    "trueauthValidateResponse": {
      "type": "object",
      "properties": {
        "user": {
          "$ref": "#/definitions/trueauthUser"
        },
        "message": {
          "type": "string"
        }
      }
    },
    "trueauthVerifyResponse": {
      "type": "object",
      "properties": {
        "user": {
          "$ref": "#/definitions/trueauthUser"
        },
        "message": {
          "type": "string"
        }
      }
    },
    "trueauthWelcomeResponse": {
      "type": "object",
      "properties": {
        "message": {
          "type": "string"
        },
        "docs": {
          "type": "string"
        }
      }
    }
  },
  "securityDefinitions": {
    "AccessToken": {
      "type": "apiKey",
      "name": "Authorization",
      "in": "header"
    },
    "BasicAuth": {
      "type": "basic"
    },
    "RefreshToken": {
      "type": "apiKey",
      "name": "Authorization",
      "in": "header"
    }
  }
}
